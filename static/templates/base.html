{% load static %}
<html>
    <head>     
        <link rel='stylesheet' 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css">
        <title>ANT BLOGS
        {% block title %}
        {% endblock %}</title> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script>
  $(document).ready(function () {
    //THIS ALERT FIRES WHEN THE PAGE LOADS
    //NOT WHEN A BUTTON IS CLICKED
    console.log("jquery");

    $("#my_form").submit(function (event) {
      //THIS ALERT FIRES WHEN THE SUBMIT BUTTON IS CLICK
      //OR WHEN THE SUBMIT EVENT IS TRIGGERED THROUGH SOME OTHER MEANS
      console.log("Validating form");
      console.log(body)
      // event.preventDefault();
      var title = $("#id_title").val();
      var body = $("#id_body").val();
      if (title == "") {
        alert("please enter the title");
        return false;
      }else if(body =="" ){ 
        alert("please enter the blog content");
        return false;
        }
    });
  });
</script>
    </head>
    <body class="bg-light">
        <nav class="navbar navbar-success bg-success">
            <div class="ms-auto">
                {% if user.is_authenticated %}
                <a href="{% url 'home' %}" class="btn btn-light me-1">Home</a>
                <a href="{% url 'blog.new' %}" class="btn btn-light me-1">Write a new article</a>
                <a href="{% url 'logout' %}" class="btn btn-light me-1">Logout</a>
                {% else %}
                <a href="{% url 'home' %}" class="btn btn-light me-1">Home</a>
                <a href="{% url 'login' %}" class="btn btn-light me-1">Login</a>
                <a href="{% url 'signup' %}" class="btn btn-light me-1">Signup</a>
                {% endif %}
            </div>
        </nav>
        <div class="my-5 text-center container">
                {% block content %}
                {% endblock %}
              </div> 
    </body>
<script type="text/javascript">
        $(document).on('submit','#my_form',function(e){
            e.preventDefault();

            $.ajax({
                type:'POST',
                url:'/create',
                data:{
                    title:$('#id_title').val(),
                    author:$('#id_author').val(),
                    category:$('#id_category').val(),
                    body:$('#id_body').val(),
                    publish:$('#id_publish').val(),
                    csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                },
                success:function(data){
                    $('h2').html(data);
                }
            });

        });
    </script>
    </html>